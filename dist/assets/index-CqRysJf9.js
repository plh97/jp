(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();const{useState:f,useEffect:w,useRef:N}=React,C={characters:[["あ","い","う","え","お"],["か","き","く","け","こ"],["さ","し","す","せ","そ"],["た","ち","つ","て","と"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ま","み","む","め","も"],["や","ゆ","よ"],["ら","り","る","れ","ろ"],["わ","を","ん"]],romaji:[["a","i","u","e","o"],["ka","ki","ku","ke","ko"],["sa","shi","su","se","so"],["ta","chi","tsu","te","to"],["na","ni","nu","ne","no"],["ha","hi","fu","he","ho"],["ma","mi","mu","me","mo"],["ya","yu","yo"],["ra","ri","ru","re","ro"],["wa","wo","n"]]},j={characters:[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["サ","シ","ス","セ","ソ"],["タ","チ","ツ","テ","ト"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["マ","ミ","ム","メ","モ"],["ヤ","ユ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヲ","ン"]],romaji:[["a","i","u","e","o"],["ka","ki","ku","ke","ko"],["sa","shi","su","se","so"],["ta","chi","tsu","te","to"],["na","ni","nu","ne","no"],["ha","hi","fu","he","ho"],["ma","mi","mu","me","mo"],["ya","yu","yo"],["ra","ri","ru","re","ro"],["wa","wo","n"]]},z={characters:[["が","ぎ","ぐ","げ","ご"],["だ","ぢ","づ","で","ど"],["ざ","じ","ず","ぜ","ぞ"],["ば","び","ぶ","べ","ぼ"],["ぱ","ぴ","ぷ","ぺ","ぽ"]],romaji:[["ga","gi","gu","ge","go"],["da","di","zu","de","do"],["za","zi","zu","ze","zo"],["ba","bi","bu","be","bo"],["pa","pi","pu","pe","po"]]},S={characters:[["ガ","ギ","グ","ゲ","ゴ"],["ダ","ヂ","ヅ","デ","ド"],["ザ","ジ","ズ","ゼ","ゾ"],["バ","ビ","ブ","ベ","ボ"],["パ","ピ","プ","ペ","ポ"]],romaji:[["ga","gi","gu","ge","go"],["da","di","du","de","do"],["za","zi","zu","ze","zo"],["ba","bi","bu","be","bo"],["pa","pi","pu","pe","po"]]},A=e=>{const r=new Map;return e.characters.forEach((n,o)=>{n.forEach((a,c)=>r.set(a,e.romaji[o][c]))}),r},L=e=>{const r=[...e];for(let n=r.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[r[n],r[o]]=[r[o],r[n]]}return r},D=({char:e,onAnswerCheck:r,characterSet:n})=>{const[o,a]=f(""),[c,m]=f(null),d=N(null),h=A(n==="hiragana"?C:n==="katakana"?j:n==="voicedHiragana"?z:S).get(e),p=t=>{const s=t.target.value.replace(/\d/g,"");a(s)},g=()=>{if(!o.trim())return;const t=o.toLowerCase()===h;m(t),r(e,t)},k=t=>{t.key==="Enter"&&g()},y=()=>{o.trim()&&g()},R=()=>{d.current&&c===null&&d.current.focus()};return React.createElement("div",{className:`hiragana-card ${c===!0?"correct":c===!1?"incorrect":""}`,"data-character":e,onClick:R},React.createElement("div",{className:"hiragana-display"},e),React.createElement("div",{className:"input-container"},c===!0?React.createElement("span",{className:"romaji-answer"},h):React.createElement("input",{type:"text",className:"romaji-input",placeholder:"...",value:o,onChange:p,onKeyPress:k,onBlur:y,ref:d})))},M=({activeTab:e,onTabChange:r,score:n,total:o})=>React.createElement("div",{className:"tabs-container"},React.createElement("div",{className:"tabs"},React.createElement("button",{className:`tab-button ${e==="hiragana"?"active":""}`,onClick:()=>r("hiragana")},"平假名"),React.createElement("button",{className:`tab-button ${e==="katakana"?"active":""}`,onClick:()=>r("katakana")},"片假名"),React.createElement("button",{className:`tab-button ${e==="voicedHiragana"?"active":""}`,onClick:()=>r("voicedHiragana")},"平假名浊音/半浊音"),React.createElement("button",{className:`tab-button ${e==="voicedKatakana"?"active":""}`,onClick:()=>r("voicedKatakana")},"片假名浊音/半浊音")),React.createElement("div",{className:"score-display"},"得分: ",n,"/",o)),I=()=>{const[e,r]=f(()=>localStorage.getItem("characterSet")||"hiragana"),[n,o]=f([]),[a,c]=f(0),[m,d]=f(!1),v=()=>e==="hiragana"?C:e==="katakana"?j:e==="voicedHiragana"?z:e==="voicedKatakana"?S:C,E=v().characters.flat().length,h=N(new Map),p=()=>{const t=v().characters.flat(),s=L(t);o(s),c(0),d(!1);const i=new Map;s.forEach(l=>{i.set(l,{correct:!1,attempts:0})}),h.current=i};w(()=>{p()},[e]);const g=t=>{r(t),localStorage.setItem("characterSet",t)},k=(t,s)=>{const i=h.current.get(t);i.attempts++,s&&!i.correct&&(i.correct=!0,c(l=>l+1)),a+1===E&&d(!0)},y=()=>{p()},R=()=>{const t=document.querySelectorAll(".hiragana-card"),s=document.activeElement,i=s?s.closest(".hiragana-card"):null;if(i){const l=Array.from(t).indexOf(i);for(let u=l+1;u<t.length;u++){const b=t[u].querySelector(".romaji-input");if(b&&(!b.value.trim()||t[u].classList.contains("incorrect"))){b.focus();return}}}for(let l of t){const u=l.querySelector(".romaji-input");if(u&&(!u.value.trim()||l.classList.contains("incorrect"))){u.focus();return}}};return w(()=>{const t=s=>{if(s.key==="Enter"){const i=document.activeElement;i&&i.classList.contains("romaji-input")&&(s.preventDefault(),R())}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[a]),React.createElement(React.Fragment,null,React.createElement(M,{activeTab:e,onTabChange:g,score:a,total:E}),React.createElement("div",{className:"container"},React.createElement("div",{className:"hiragana-area"},n.map((t,s)=>React.createElement(D,{key:s+e,char:t,onAnswerCheck:k,characterSet:e})))),React.createElement("button",{className:"reset-button",onClick:y},"重置"),m&&React.createElement("div",{className:"win-message"},"恭喜你！全部答对了！"))},O=ReactDOM.createRoot(document.getElementById("root"));O.render(React.createElement(I,{tab:"home"}));
